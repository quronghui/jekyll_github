---
layout: post
title: 计算机组成与设计 硬件／软件接口 
date: 2018-12-03
categories: Book
tags: Computer Software Hardware Interface 
---

# 第一章 计算机概要与技术 
## Schedule

|Dateline|start time|end time|Learning|
|:-:|:-:|:-:|:-:|
|2018/12/3|19:00|20:00|从新开始学习
|2018/12/4|8:20|9:57|第一章

## Proper Noun

|Full name|中文|acronym|
|:-:|:-:|:-:|
|personal mobile device|个人移动设备|PMD|
|Warehouse scale computer|巨型数据中心|WSC|
|Liquid Crystal Display|液晶显示|LCD|
|active matrix display|动态矩阵显示|
|Integrated circuit|集成电路|
|Central peocessor unit|中央处理单元|CPU|
|dynamic random access memory|动态随机存储器|DRAM
|static random access memory|静态随机存储器|SRAM -- 价格高于DRAM
|very large-scale integrated circuit|超大规模集成电路|VLSI
|clock cycle per instruction|执行每条指令所需时钟周期数的平均值|CPI
|System performance evaluation cooperative|计算机组织，为现代计算机系统建立基准测试集|SPEC|

## Conception
+ 计算机革命推动人类的进步
1. 个人计算机和服务器
    + 服务于个人，和服务于多人的一种可视化操作系统
    + 嵌入式计算机：嵌入到其他设备中的计算机，一般运行预定义的一个或者一组应用程序。
    + 云计算：集群服务器
    + 软件即服务
3. 现代微处理器：
    + 理解现代微处理器硬件如何使性能提高200倍。
4. 摩尔定律：
    + 计算机设计者面临问题：
    + 单芯片上的集成度没18-24个月翻一番，意味着驱动的快速变化。
5. 使用抽象简化设计
    + 抽象：表示不同的设计层次，从高层此种只能看到一个简化模型。
6. 通过冗余提高可靠性
    + 使用冗余部件提高系统的可靠性，并可以帮助检测错误。  
7. 学到啥
    + 如何正确剖析软硬件，如何评价性能与功耗

![learning]({{ site.url }}/assets/icbook/learning.png)

## 程序入门概念
1. 应用软件-->系统软件-->硬件执行
2. 系统软件
    + 提供常用的服务软件：操作系统，编译程序，加载程序和汇编程序。
    - 操作系统
    - 编译程序：将高级语言翻译为计算机识别的机器语言的程序
3. 指令
    + 0/1数字：即表述指令（计算机硬件理解并服从的命令），又表示数据（二进制位）
4. 汇编语言
    + 语言是一种指令（表示），程序是转换的过程。
+ 汇编程序：将指令由助记符形式翻译成二进制形式的程序
+ 汇编语言：以助记符形式表示的机器指令；
+ 机器语言：以二进制形式表示的机器指令

## 硬件入门
+ **正确剖析软硬件**

![hardware]({{ site.url }}/assets/icbook/hardware.png)

1. **基础硬件的基本功能**
    + 输入数据--输出数据--处理数据（数据通路和控制器）--存储数据
2. 显示器
    + 图像由像素矩阵组成，可以表示成二进制位的矩阵，称为位图（bit map）
3. 处理器
    + 逻辑上分为两部分：数据通路和控制器
    + 数据通路：负责完成算数运算
    + 控制器：负责指导数据通路
4. 内存
    + 内存：程序运行时的存储空间，
    + 由多片DRAM组成
5. 缓存 cache memory --- SRAM
    + 处理其内部的另外一种存储器
    + 小而快的存储效应，作为DRAM的缓冲
6. **抽象之一** - P15
    + 该抽象被命名为计算机**指令集体系结构** -- 体系结构
    + 硬件的实现方法必须依照体系结构的抽样
    + 抽象系统中的一个关键接口是指令集体系结构--硬件和底层软件的接口
7. 计算机网络
    + 计算机不可缺少的功能
8. 晶体管-硅制作的工艺--芯片chip
    + 成品率的计算

## 性能
1. 性能的评价因素
    + 响应时间和吞吐量
    + 增加性能和降低执行时间是一个倒数关系
2. CPU（Central Processing Unit） 性能及其影响因素
    + 时钟周期数、时钟周期时间（时钟频率的倒数）
    + CPU（t） = CPU ( 时钟周期数 ) / CPU ( 时钟频率 )
    - CPU 时钟周期数 = 程序的指令数 * CPI(每条指令的平均时钟周期数）
    + 经典公式 ：CPU(t) = 指令数 * CPI / 时钟频率
3. 功耗：使用能耗更合理
    + 功耗：由于CMOS管0-1-0的跳变
    + 能耗的来源是 CMOS 管开关动作中的消耗
    + 一个晶体管能耗 = 1/2 * 负载电容 * 电压（平方）
    + 一个晶体管功耗 = 1/2 * 负载电容 * 电压（平方）* 开关频率

## 单处理器-->多处理器
1. 原因：
    + 增加多个微处理器，得到更大的吞吐量。不再继续追求单个程序运行在单个处理器上的响应时间 
    + 单处理器--processor or cores; 多核处理器(微处理器)-- microprocessor
2. 并行性
    + 并行性对计算机性能十分重要，但它往往是隐蔽的
    + 挑战：调度、负载平衡、同步、通信
3. **硬件/软件接口：显示并行编程**
    + 并行性对计算机一直十分重要
    + 程序员未来：显式并行编程，不单是串行
  
![parallel]({{ site.url }}/assets/icbook/parallel.png)

## Iner Core i7 基准
1. SPEC CPU 基准测试程序
    + 工作负载：运行在计算机上的一组程序。
    + 基准测试程序：用于比较计算机性能的一组程序。
2. SPEC 采用单个的数字来进行归纳
    + SPECpower 功耗是有规定
    + 称为：overall ssi_ops per watt
    + 计算公式
## 谬论和陷阱
1. 谬论：面向性能的设计和面向能量效率（功耗）的设计具有不相关的指标。
2. 陷阱：用性能公示的一个子集去度量性能。
3. 硬件和软件的设计者都采用分层的方法构建计算机系统，每个下层都对其上层隐藏本层的细节。
4. 抽象：理解硬件和底层软件之间的接口，指令集的体系结构。
5. 执行时间：唯一有效且不可推翻的性能评价指标。    

![introduction]({{ site.url }}/assets/icbook/introduction.png)


# 第二章 指令--计算机的语言
+ MIPS指令集，是一种寄存器到寄存器的语言。
### Proper Noun
|Full name|中文|acronym|
|:-:|:-:|:-:|
|instruction set|指令集|一个给定的计算机体系结构所包含的指令集合。
|American Standrad Code for Information Interchange|ASCII|计算机的文字处理
|Acorn Risc Machine|ARM|处理器
|P99页|ARM|有更多的寻址模式|
||MIPS|有更多的寄存器|
### Question ？
+ 1、为什么 Java 和 C 会是一样的呢？？
    + 解释和编译的平衡随着时间的推移逐步形成。
- 2、加速大概率事件？是什么意思.
+ 3、编译C语言和解释Java语言？在配套的网站上。
###  MIPS 的指令集 
+ P41 页
+ 一条指令，由三个操作数构成
### 计算机硬件的操作数
1. 寄存器
    + MIPS 算数运算指令的操作数，必须来自寄存器；寄存器存储的是用于算数运算的操作数。
    + 寄存器由硬件直接构建，且数量有限。
2. 字
    + 计算机中的基本访问单元，通常是32位一组，在MIPS中与寄存器大小一致。
    + 一个字 = 相当于4个字节
3. 存储器
    + 存放像数组或结构那样的复杂数据结构；
    + 由于MIPS的原因：存储器和寄存器之间存在取数操作;对地址进行操作
    + 存储器 --> 寄存器 ：取数操作 load word
    + 寄存器 --> 存储器 ：存数操作 store word
4. 数据操作
    + 变量的操作
        + 先读取地址，然后进行操作
    + 常数的操作
        + 通过立即数--immediate，直接进行操作
        + 例：加立即数 addi $s3,$s3,4 -->  # $s3 = $s3 + 4
5. 符号位和非符号位表示方式
    + 负数的表示方式：采用补码的形式表示
    + 补码：最高位设置为1，源码取反（最高位不变），最低位加1。
### 计算机硬件对过程的支持
1. 栈的使用
    + 栈的增长是一种先进先出的结构；
    + 地址从高到低进行的,压栈时，栈的指针值减小
### 人机交互
+ 1、计算机是为了计算而生
+ 2、j计算机表示文字的处理，实现了人机交互。遵循ASCII
+ 3、为了表示web的全球特性,当今的大部分web页面采Unicode,而非ASCII。
### C完整程序
+ 1、运算的缩写没有记住
### 数组和指针
+ 1、指针中变量的地址用 & 表示，指针所指向的对象用 * 表示。
+ 2、寄存器的操作都是通过地址进行操作的。
+ 3、编译器技术的理解，是理解性能的关键。
### ARM7(32)位指令集
|区别|ARM(32位)|MIPS|
|:-:|:-:|:-:|
||多寻址模式|多寄存器
|保存0|没有专门的寄存器|zero寄存器保存|

## 第三章 计算机的算数运算
### Proper Noun
|Full name|中文|acronym|
|:-:|:-:|:-:|
|Arithmetic logic unit|算数逻辑单元|ALU|
|Exception Program Counter|异常程序计数器|EPC|
### Question ？
+ 1、无符号数通常表示内存地址，溢出可以忽略？
+ 2、每个编译器都将以2为底的指数乘法替换为移位来进行优化。
+ 3、使用32位数据表示通常要处理的无限数字。
+ 4、乘法和除法：尽可能用 0/1  
### 加法和减法
1. 运算规则
    + 加法运算：从右到左，二进制代码相加进位；
    + 减法运算：将负数取反后，按照加法进行
2. 计算是否会溢出
    + 加法:源操作数异号时，不会溢出。
    + 减法:源操作数同号时，不会溢出。
3. 异常程序计数器EPC
    + 保存导致异常的指令地址
### 乘法
1. 乘法运算
    + 被乘数和乘数的表示？
    + 被乘数每次左移一位，和乘数的一位相乘，结果相加
    + 积的位数 = 被乘数的位数 + 乘数的位数
2. 被乘数，乘数，积
    + 每次进行的移位操作
    + 积：每次的求和结果
3. 更快速乘法
    + 给每一个乘法数分配一个32位的加法器；
    + 形成一个加法树；
### 除法
1. 除法没有怎么看懂？
2. 计算的方式
    + 除数：在右边补0，使其和被除数一样的位数
    + 计算的时候：商左移，除数右移
    + 除法：做减法；乘法：做加法

## 第四章 处理器